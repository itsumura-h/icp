---
sidebar_position: 29
---

# 再帰型

再帰型とは、同じ型の値を含む型です。再帰型を使用することで、リンクリストやツリーなどの複雑な再帰的データ構造を作成できます。

Motoko は、再帰型の例としてリンクリストというデータ構造をサポートしています。

## 再帰的リスト

``` motoko no-repl
type List<T> = ?(T, List<T>);
```

この例では、ジェネリック型 `List<T>` が1つの型パラメータで定義されています。`List<T>` は2つのコンポーネントを持つタプルです。最初のコンポーネントは型パラメータ `T` で、2番目のコンポーネントは `List<T>` です。2番目のコンポーネントは再帰型で、ジェネリック型 `List<T>` はその定義内に自身の値を含んでいます。

`List` は繰り返しパターンであり、各繰り返しのコンポーネントは、型 `T` の値と `List<T>` の尾への参照を含むタプルです。

## 再帰的関数

再帰的な関数を使用して、与えられたリストの最後の要素を取得することができます：

``` motoko no-repl
func last<T>(l : List<T>) : ?T {
  switch l {
    case null { null };
    case (?(x, null)) { ?x };
    case (?(_, t)) { last<T>(t) };
  };
};
```

このジェネリック関数 `last<T>` は、型 `List<T>` の引数 `l` を取ります。この引数はリストの先頭を指します。この関数はリストの最後の要素を返す場合、オプショナル値 `?T` を返します。最後の要素がない場合は `null` を返します。関数の本体では、`switch` 文を使用して、引数として渡されたリストが空のリストか、リストの最後の要素か、次の値を持つリストの尾であるかを判定します。

この `switch` 文では、`last<T>` 関数が再帰的に使用されています。なぜなら、関数は引数として `t` を与えて再び自身を呼び出すからです。ケース文が満たされるたびに関数は再帰的に呼び出され、リストの先頭が渡され、そのリストに対して再び `switch` を行い、最後の要素が返されるまで繰り返します。

:::info
再帰型のすべてのデータにアクセスするには、再帰的な関数を使用する必要があることに注意してください。
:::

## リソース

- [再帰型](https://github.com/Web3NL/motoko-book/blob/main/src/advanced-types/recursive-types.md)
