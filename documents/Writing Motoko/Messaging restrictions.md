以下が翻訳結果です：

---

# メッセージ制限

ICPは、カニスター間の通信が許可されるタイミングや方法に制限を設けています。これらの制限は動的に適用されますが、Motokoでは静的に防止されるため、動的な実行エラーのクラスが排除されます。2つの例を挙げると：

- カニスターのインストールはコードを実行できますが、メッセージを送信することはできません。
- カニスターのクエリメソッドはメッセージを送信できません。

これらのICPの制限は、Motokoでは特定の式が出現できるプログラムのコンテキストに対する制約として表現されます。これらの制約に違反すると、型チェッカーによってエラーとして報告されます。

Motokoでは、式が非同期コンテキスト内で発生する場合、それは`async`式の本体に現れる式です。`async`式は、共有関数やローカル関数の本体、または独立した式の本体のいずれかです。唯一の例外は、`query`関数で、`query`関数の本体は非同期コンテキストを開くものと見なされません。

Motokoでは、非同期コンテキスト内でない限り、共有関数を呼び出すことはエラーとなります。また、アクタークラスのコンストラクタから共有関数を呼び出すこともエラーです。

`await`および`async`構造は、非同期コンテキスト内でのみ許可されます。

エラーの`throw`や`try/catch`は、非同期コンテキスト内でのみ可能です。これは、構造化されたエラーハンドリングがメッセージングエラーに対してのみサポートされており、メッセージングと同様に非同期コンテキスト内に限定されるためです。

これらのルールは、ローカル関数が直接共有関数を呼び出したり、`await`フューチャーを待機したりできないことも意味します。

（`await*`および`async*`式にも同じ制限が適用されます。）

<img src="https://github.com/user-attachments/assets/844ca364-4d71-42b3-aaec-4a6c3509ee2e" alt="Logo" width="150" height="150" />
